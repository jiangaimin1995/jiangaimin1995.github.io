<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha256-wiz7ZSCn/btzhjKDQBms9Hx4sSeUYsDrTLg7roPstac=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.33/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"tdlpblog.cn","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"fold":{"enable":true,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="article">
<meta property="og:title" content="python与机器学习系列">
<meta property="og:url" content="https://tdlpblog.cn/year/030346613.html">
<meta property="og:site_name" content="劝人学医TDLP的博客">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_jpg/EKDJKJSia78RSJGOeib1BxdksxdREz8V8SEsKwxtn9XNxdotEB0hsvR54N0JJYSbkU3P1LZdhrZxicP2ffDp94jgg/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/EKDJKJSia78RSJGOeib1BxdksxdREz8V8S7zOcyyTz6jib4jls6JTuVyJQicnOvwLyJYxibQJh7mzDbqJNQGwjMXoBA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/EKDJKJSia78RSJGOeib1BxdksxdREz8V8SAicHhFUL8EiaBZAQqJhZNEiczv1zjrYJibUqsBOa4Rc7feuTAow8h5vrZQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_gif/EKDJKJSia78RSJGOeib1BxdksxdREz8V8SvP0L1N5wJ2sy70dia1qmxEGgibYOsmsU9KRicMyeqIetVib41kFmcUnAKg/640?wx_fmt=gif&wxfrom=5&wx_lazy=1">
<meta property="article:published_time" content="2024-03-03T06:28:20.000Z">
<meta property="article:modified_time" content="2024-03-03T07:01:11.928Z">
<meta property="article:author" content="蒋不言">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="机器学习">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mmbiz.qpic.cn/mmbiz_jpg/EKDJKJSia78RSJGOeib1BxdksxdREz8V8SEsKwxtn9XNxdotEB0hsvR54N0JJYSbkU3P1LZdhrZxicP2ffDp94jgg/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1">


<link rel="canonical" href="https://tdlpblog.cn/year/030346613.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://tdlpblog.cn/year/030346613.html","path":"year/030346613.html","title":"python与机器学习系列"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>python与机器学习系列 | 劝人学医TDLP的博客</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="劝人学医TDLP的博客" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">劝人学医TDLP的博客</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">The Data Literary Project</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Python%E4%B8%AD%E7%9A%84%E5%90%91%E9%87%8F%E3%80%81-%E7%9F%A9%E9%98%B5%E5%92%8C%E6%95%B0%E7%BB%84"><span class="nav-number">1.</span> <span class="nav-text">Python中的向量、 矩阵和数组</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%90%91%E9%87%8F"><span class="nav-number">1.1.</span> <span class="nav-text">创建向量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%9F%A9%E9%98%B5"><span class="nav-number">1.2.</span> <span class="nav-text">创建矩阵</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%A8%80%E7%96%8F%E7%9F%A9%E9%98%B5"><span class="nav-number">1.3.</span> <span class="nav-text">创建稀疏矩阵</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%89%E6%8B%A9%E5%85%83%E7%B4%A0"><span class="nav-number">1.4.</span> <span class="nav-text">选择元素</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B1%95%E7%A4%BA%E7%9F%A9%E9%98%B5%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="nav-number">1.5.</span> <span class="nav-text">展示矩阵的属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%B9%E5%A4%9A%E4%B8%AA%E5%85%83%E7%B4%A0%E5%90%8C%E6%97%B6%E5%BA%94%E7%94%A8%E6%9F%90%E4%B8%AA%E6%93%8D%E4%BD%9C"><span class="nav-number">1.6.</span> <span class="nav-text">对多个元素同时应用某个操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%BE%E5%88%B0%E6%9C%80%E5%A4%A7%E5%80%BC%E5%92%8C%E6%9C%80%E5%B0%8F%E5%80%BC"><span class="nav-number">1.7.</span> <span class="nav-text">找到最大值和最小值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E5%B9%B3%E5%9D%87%E5%80%BC%E3%80%81-%E6%96%B9%E5%B7%AE%E5%92%8C%E6%A0%87%E5%87%86%E5%B7%AE"><span class="nav-number">1.8.</span> <span class="nav-text">计算平均值、 方差和标准差</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9F%A9%E9%98%B5%E5%8F%98%E5%BD%A2"><span class="nav-number">1.9.</span> <span class="nav-text">矩阵变形</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%AC%E7%BD%AE%E5%90%91%E9%87%8F%E6%88%96%E7%9F%A9%E9%98%B5"><span class="nav-number">1.10.</span> <span class="nav-text">转置向量或矩阵</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B1%95%E5%BC%80%E4%B8%80%E4%B8%AA%E7%9F%A9%E9%98%B5"><span class="nav-number">1.11.</span> <span class="nav-text">展开一个矩阵</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E7%9F%A9%E9%98%B5%E7%9A%84%E7%A7%A9"><span class="nav-number">1.12.</span> <span class="nav-text">计算矩阵的秩</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E8%A1%8C%E5%88%97%E5%BC%8F"><span class="nav-number">1.13.</span> <span class="nav-text">计算行列式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E7%9F%A9%E9%98%B5%E7%9A%84%E5%AF%B9%E8%A7%92%E7%BA%BF%E5%85%83%E7%B4%A0"><span class="nav-number">1.14.</span> <span class="nav-text">获取矩阵的对角线元素</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E7%9F%A9%E9%98%B5%E7%9A%84%E8%BF%B9"><span class="nav-number">1.15.</span> <span class="nav-text">计算矩阵的迹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E7%89%B9%E5%BE%81%E5%80%BC%E5%92%8C%E7%89%B9%E5%BE%81%E5%90%91%E9%87%8F"><span class="nav-number">1.16.</span> <span class="nav-text">计算特征值和特征向量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E7%82%B9%E7%A7%AF"><span class="nav-number">1.17.</span> <span class="nav-text">计算点积</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9F%A9%E9%98%B5%E7%9A%84%E7%9B%B8%E5%8A%A0%E6%88%96%E7%9B%B8%E5%87%8F"><span class="nav-number">1.18.</span> <span class="nav-text">矩阵的相加或相减</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9F%A9%E9%98%B5%E7%9A%84%E4%B9%98%E6%B3%95"><span class="nav-number">1.19.</span> <span class="nav-text">矩阵的乘法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E7%9F%A9%E9%98%B5%E7%9A%84%E9%80%86"><span class="nav-number">1.20.</span> <span class="nav-text">计算矩阵的逆</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E6%95%B0"><span class="nav-number">1.21.</span> <span class="nav-text">生成随机数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E6%95%B4%E7%90%86"><span class="nav-number">2.</span> <span class="nav-text">Python中的数据整理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">2.1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%B8%A7"><span class="nav-number">2.2.</span> <span class="nav-text">创建一个数据帧</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%8F%E8%BF%B0%E6%95%B0%E6%8D%AE"><span class="nav-number">2.3.</span> <span class="nav-text">描述数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8F%E8%A7%88%E6%95%B0%E6%8D%AE%E5%B8%A7"><span class="nav-number">2.4.</span> <span class="nav-text">浏览数据帧</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5%E6%9D%A5%E9%80%89%E6%8B%A9%E8%A1%8C"><span class="nav-number">2.5.</span> <span class="nav-text">根据条件语句来选择行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%BF%E6%8D%A2%E5%80%BC"><span class="nav-number">2.6.</span> <span class="nav-text">替换值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E5%91%BD%E5%90%8D%E5%88%97"><span class="nav-number">2.7.</span> <span class="nav-text">重命名列</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%80%E5%B0%8F%E5%80%BC%E3%80%81-%E6%9C%80%E5%A4%A7%E5%80%BC%E3%80%81-%E6%80%BB%E5%92%8C%E3%80%81-%E5%B9%B3%E5%9D%87%E5%80%BC%E4%B8%8E%E8%AE%A1%E6%95%B0%E5%80%BC"><span class="nav-number">2.8.</span> <span class="nav-text">计算最小值、 最大值、 总和、 平均值与计数值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E6%89%BE%E5%94%AF%E4%B8%80%E5%80%BC"><span class="nav-number">2.9.</span> <span class="nav-text">查找唯一值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%84%E7%90%86%E7%BC%BA%E5%A4%B1%E5%80%BC"><span class="nav-number">2.10.</span> <span class="nav-text">处理缺失值</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <a href="/">
    <img class="site-author-image" itemprop="image"
      src="/images/avatar.png"
      alt="蒋不言">
  <p class="site-author-name" itemprop="name">蒋不言</p>
  <div class="site-description" itemprop="description">没有比人更高的山！</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">5</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="/Roger%E4%B8%8D%E8%A8%80:2251376849@qq.com" title="E-Mail → Roger不言:2251376849@qq.com" rel="noopener me"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%EF%BC%9A%E5%8A%9D%E4%BA%BA%E5%AD%A6%E5%8C%BBTDLP" title="WeChat → 微信公众号：劝人学医TDLP" rel="noopener me"><i class="fab fa-weibo fa-fw"></i>WeChat</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

<!-- hitokoto -->

<div class="hitokoto-title">
  <i class="fa fa-quote-right"></i>
  <b>一言</b>
</div>

<div id="hitokoto">:D 獲取中...</div>
<i id="hitofrom">:D 獲取中...</i>

<script src="https://cdn.jsdelivr.net/npm/bluebird@3/js/browser/bluebird.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/whatwg-fetch@2.0.3/fetch.min.js"></script>
<script>
  fetch('https://v1.hitokoto.cn')
    .then(function (res){
      return res.json();
    })
    .then(function (data) {
      var hitokoto = document.getElementById('hitokoto');
      hitokoto.innerText = '\xa0\xa0\xa0\xa0\xa0\xa0\xa0' + data.hitokoto;
      var hitofrom = document.getElementById('hitofrom');
      hitofrom.innerText = "——" + data.from + '\xa0'; 
    })
    .catch(function (err) {
      console.error(err);
    })
</script>
        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-meta">

</div>

<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tdlpblog.cn/year/030346613.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="蒋不言">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="劝人学医TDLP的博客">
      <meta itemprop="description" content="没有比人更高的山！">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="python与机器学习系列 | 劝人学医TDLP的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          python与机器学习系列<a href="https://github.com/user-name/repo-name/edit/branch-name/subdirectory-name/_posts/python%E4%B8%8E%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97.md" class="post-edit-link" title="编辑" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a>
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2024-03-03 14:28:20 / 修改时间：15:01:11" itemprop="dateCreated datePublished" datetime="2024-03-03T14:28:20+08:00">2024-03-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python%E4%B8%8E%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">Python与机器学习</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>22k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>39 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/EKDJKJSia78RSJGOeib1BxdksxdREz8V8SEsKwxtn9XNxdotEB0hsvR54N0JJYSbkU3P1LZdhrZxicP2ffDp94jgg/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<span id="more"></span>

<p>从这次开始，我们将一起学习Python与机器学习。因为我们之前的R与机器学习系列已经系统地介绍了各种机器学习的特点及其实现过程，相信大家对机器学习有了一定的了解和基础。所以我们选择Chris Albon的著作Machine Learning with Python Cookbook-Practical Solutions from Preprocessing to Deep Learning作为我们的学习参考。</p>
<p>关于为什么要使用Python，我们之前其实已经介绍了Python在机器学习以及大数据处理中的优势，这里不再赘述。</p>
<p>关于Python的基础知识，其实跟R基础类似，小编觉得需要在实践中去掌握并巩固基础知识。因为单纯的去看偏理论的基础知识相当枯燥。但是，这不代表基础知识不重要，相反，基础知识在后面的学习中至关重要。所以，想跟着这个系列学习的小伙伴最好是自己学习一些Python的基础知识，方便后面的学习。其实语言都是相通的，如果你学习过R基础，那么Python的语法结果这些应该很快能掌握。</p>
<p>关于软件，小编使用的是Python的虚拟环境，Anaconda。如何安装、如何使用，这些在网上有大量的教程，请自行参考。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/EKDJKJSia78RSJGOeib1BxdksxdREz8V8S7zOcyyTz6jib4jls6JTuVyJQicnOvwLyJYxibQJh7mzDbqJNQGwjMXoBA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="Anaconda navigator界面"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/EKDJKJSia78RSJGOeib1BxdksxdREz8V8SAicHhFUL8EiaBZAQqJhZNEiczv1zjrYJibUqsBOa4Rc7feuTAow8h5vrZQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="Spyder界面"></p>
<p>具体Anoconda的安装和相关简介可以看以下这篇介绍：</p>
<blockquote>
<p>Anaconda介绍、安装及使用教程</p>
<p>知乎-Anaconda介绍、安装及使用教程</p>
</blockquote>
<hr>
<p>NumPy是Python机器学习技术栈的基础。NumPy能对机器学习中常用的数据结构——向量（vector） 、 矩阵（matrice） 、 张量（tensor） —进行高效的操作。本章将介绍在进行机器学习的过程中可能经常遇到的NumPy作。</p>
<p><strong>Numpy简介</strong></p>
<p>NumPy（Numerical Python的缩写）是Python中一个重要的数值计算库，它提供了用于处理大型多维数组和矩阵的数据结构，以及用于执行这些数组上的数学运算的函数。NumPy是数据科学、机器学习、科学计算等领域的核心库，具有以下重要特点和功能：</p>
<ul>
<li>多维数组（ndarray）：NumPy的核心数据结构是多维数组（也称为ndarray），它是一个固定大小、可变的数组，可以容纳相同类型的数据。这些数组可以是一维、二维或更高维的，适用于各种数值和数据处理任务。</li>
<li>广播（Broadcasting）：NumPy具有强大的广播功能，允许在不同形状的数组之间进行运算，而无需显式循环。这使得元素级操作更加方便和高效。</li>
<li>数学函数：NumPy提供了大量的数学、统计和线性代数函数，包括各种数学运算、随机数生成、傅立叶变换、矩阵操作等。</li>
<li>互操作性：NumPy与其他Python库相互兼容，特别是与SciPy（科学计算库）、Matplotlib（绘图库）和pandas（数据分析库）等。这意味着你可以将NumPy与其他库结合使用，构建强大的数据处理和分析工具。</li>
<li>性能优化：NumPy的底层实现使用了高度优化的C和Fortran代码，因此在处理大规模数据时具有出色的性能。此外，NumPy还提供了内存管理工具，可以有效管理大型数据集的内存。</li>
<li>开源和社区支持：NumPy是一个开源项目，拥有庞大的活跃社区，提供了广泛的文档、教程和支持资源。这使得它成为学习和使用数值计算的理想选择。</li>
</ul>
<h1 id="Python中的向量、-矩阵和数组"><a href="#Python中的向量、-矩阵和数组" class="headerlink" title="Python中的向量、 矩阵和数组"></a><strong>Python中的向量、 矩阵和数组</strong></h1><h2 id="创建向量"><a href="#创建向量" class="headerlink" title="创建向量"></a><strong>创建向量</strong></h2><p>在数学和计算机科学中，向量是一个有序的数值序列，它是一个基本的数学对象，用于表示和处理多种类型的数据和信息。向量通常用于描述空间中的点、物理量的大小和方向、数据的集合等等。</p>
<p>向量是一个有序的数值序列，每个元素都按照特定的顺序排列。这个顺序非常重要，因为它定义了向量的唯一性。向量的维度表示向量中包含的元素数量。一维向量包含一个元素，二维向量包含两个元素，以此类推。向量可以进行各种数学运算，包括加法、减法、数乘、点积（内积）等。</p>
<p>向量通常用方括号或圆括号表示，如 [1, 2, 3] 或 (1, 2, 3)。</p>
<p>NumPy的主要数据结构是多维数组（array）。要创建一个向量， 只需简单地创建一个一维数组即可。和向量相似， 对这些数组， 我们能水平地（也就是行） 或垂直地（也就是列） 表示。 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 创建一个向量</span></span><br><span class="line"><span class="comment"># 加载库</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># 创建一个行向量</span></span><br><span class="line">vector_row = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"><span class="comment"># 创建一个列向量</span></span><br><span class="line">vector_column = np.array([[<span class="number">1</span>],</span><br><span class="line">                          [<span class="number">2</span>],</span><br><span class="line">                          [<span class="number">3</span>],</span><br><span class="line">                          [<span class="number">4</span>],</span><br><span class="line">                          [<span class="number">5</span>],</span><br><span class="line">                          [<span class="number">6</span>]])</span><br></pre></td></tr></table></figure>

<h2 id="创建矩阵"><a href="#创建矩阵" class="headerlink" title="创建矩阵"></a><strong>创建矩阵</strong></h2><p>矩阵是由数字排列成的矩形数组。矩阵由行和列组成，每个元素都可以在矩阵中唯一地通过其行和列的索引来标识。一般情况下，矩阵中的元素可以是数字（实数、复数）或其他可定义的数学对象。</p>
<p>矩阵中的元素按行和列排列。行通常从上到下编号，列通常从左到右编号。矩阵的维度由其行数和列数确定。如果一个矩阵有m行和n列，通常会称其为mxn矩阵，或者简称为“m×n矩阵”。矩阵中的每个元素可以是任何数值，包括整数、小数、复数等。矩阵支持一系列运算，包括加法、减法、乘法、转置等。</p>
<p>我们可以通过创建一个NumPy二维数组来创建一个矩阵。通过以下代码，我们创建了一个3行3列的矩阵（二维数组）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 创建一个矩阵</span></span><br><span class="line">matrix = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">                   [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>],</span><br><span class="line">                   [<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>]])</span><br></pre></td></tr></table></figure>

<h2 id="创建稀疏矩阵"><a href="#创建稀疏矩阵" class="headerlink" title="创建稀疏矩阵"></a><strong>创建稀疏矩阵</strong></h2><p>稀疏矩阵（Sparse Matrix）是一种特殊类型的矩阵，其中大多数元素都是零。与稠密矩阵（Dense Matrix）相比，稀疏矩阵具有许多零元素，这些零元素占据了矩阵的大部分空间。在实际应用中，许多数据集或问题的矩阵表示都是稀疏的，因此稀疏矩阵在各种领域的数据分析和计算中非常常见。</p>
<p>稀疏矩阵通常以压缩的形式存储，以节省内存空间。有几种常见的表示稀疏矩阵的方法，包括：</p>
<ul>
<li>压缩稀疏列（CSC）：在CSC表示中，矩阵的每一列都存储为一个单独的数据结构，包括非零元素的值、非零元素的行索引和列指针。这种表示适合按列访问矩阵。</li>
<li>压缩稀疏行（CSR）：在CSR表示中，矩阵的每一行都存储为一个单独的数据结构，包括非零元素的值、非零元素的列索引和行指针。这种表示适合按行访问矩阵。</li>
<li>坐标列表（COO）：在COO表示中，矩阵中的每个非零元素都存储为一个单独的数据结构，包括其行索引、列索引和值。这种表示适合构建稀疏矩阵。</li>
</ul>
<p><strong>稀疏矩阵的使用可以节省内存，提高计算效率，因为在进行矩阵运算时不必考虑大量的零元素</strong>。在机器学习中， 数据集十分庞大且其中大部分元素都是零的情况很常见。举个例子， 想象一个矩阵， 列元素是Netflix上的所有电影， 行元素是Netflix的所有用户， 矩阵中元素的值代表对于某部电影每个用户看过几次。这个矩阵将会拥有成千上万列以及数百万行！但由于大多数用户只看过一部分电影， 所以绝大多数元素的值是零。<strong>稀疏矩阵只保存非零元素并假设剩余元素的值都是零， 这样能节省大量的计算成本</strong>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> sparse</span><br><span class="line"><span class="comment"># 创建矩阵</span></span><br><span class="line">matrix = np.array([[<span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">                   [<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">                   [<span class="number">3</span>, <span class="number">0</span>]])</span><br><span class="line"><span class="comment"># 创建压缩行 (CSR)矩阵</span></span><br><span class="line">matrix_sparse = sparse.csr_matrix(matrix)</span><br><span class="line"><span class="comment"># 查看稀疏矩阵</span></span><br><span class="line"><span class="built_in">print</span>(matrix_sparse)</span><br><span class="line"> <span class="comment"># (1, 1)  1</span></span><br><span class="line"> <span class="comment"># (2, 0)  3</span></span><br></pre></td></tr></table></figure>

<p>在上面的代码中， 我们创建了带有两个非零值的NumPy数组， 然后将其转换成一个稀疏矩阵。如果查看这个稀疏矩阵， 就能看到只有其中的非零值被保存下来了。</p>
<p>在压缩的稀疏行（CSR） 矩阵中， (1,1)和(2,0)用下标（下标的编号从0开始递增） 分别表示非零值1和3。例如， 元素1就位于矩阵的第二行和第二列。 </p>
<p>如果创建一个更大的矩阵， 而这个矩阵有更多的非零元素， 那么与普通矩阵相比， 稀疏矩阵的优势就体现出来了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个更大的矩阵</span></span><br><span class="line">matrix_large = np.array([[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">                         [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">                         [<span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]])</span><br><span class="line"><span class="comment"># 创建一个压缩行（CSR）矩阵</span></span><br><span class="line">matrix_large_sparse = sparse.csr_matrix(matrix_large)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看更大的稀疏矩阵</span></span><br><span class="line"><span class="built_in">print</span>(matrix_large_sparse)</span><br><span class="line">  <span class="comment"># (1, 1)  1</span></span><br><span class="line">  <span class="comment"># (2, 0)  3</span></span><br></pre></td></tr></table></figure>

<h2 id="选择元素"><a href="#选择元素" class="headerlink" title="选择元素"></a><strong>选择元素</strong></h2><p>NumPy数组的索引编号是从0开始的， 这意味着第一个元素的下标是0而不是1。此外， NumPy还提供了很多方式来选取元素或数组中的一组元素（即索引和切片）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个行向量</span></span><br><span class="line">vector = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"><span class="comment"># 创建一个矩阵</span></span><br><span class="line">matrix = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">                   [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">                   [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment">#选择向量的第三个元素</span></span><br><span class="line">vector[<span class="number">2</span>]</span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment">#选择矩阵的第二行第二列</span></span><br><span class="line">matrix[<span class="number">1</span>,<span class="number">1</span>]</span><br><span class="line"><span class="comment"># 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择一个向量的所有元素</span></span><br><span class="line">vector[:]</span><br><span class="line"><span class="comment"># array([1, 2, 3, 4, 5, 6])</span></span><br><span class="line"><span class="comment"># 选择第3个元素及之前的元素</span></span><br><span class="line">vector[:<span class="number">3</span>]</span><br><span class="line"><span class="comment"># array([1, 2, 3])</span></span><br><span class="line"><span class="comment"># 选择第3个元素以后的元素</span></span><br><span class="line">vector[<span class="number">3</span>:]</span><br><span class="line"><span class="comment"># array([4, 5, 6])</span></span><br><span class="line"><span class="comment"># 选择最后一个元素</span></span><br><span class="line">vector[-<span class="number">1</span>]</span><br><span class="line"><span class="comment"># 6</span></span><br><span class="line"><span class="comment"># 选择矩阵的前两行和所有列</span></span><br><span class="line">matrix[:<span class="number">2</span>,:]</span><br><span class="line"><span class="comment"># array([[1, 2, 3],</span></span><br><span class="line"><span class="comment">#       [4, 5, 6]])</span></span><br><span class="line"><span class="comment"># 选择所有行和第2列</span></span><br><span class="line">matrix[:,<span class="number">1</span>:<span class="number">2</span>]</span><br><span class="line"><span class="comment"># array([[2],</span></span><br><span class="line"><span class="comment">#        [5],</span></span><br><span class="line"><span class="comment">#        [8]])</span></span><br></pre></td></tr></table></figure>

<h2 id="展示矩阵的属性"><a href="#展示矩阵的属性" class="headerlink" title="展示矩阵的属性"></a><strong>展示矩阵的属性</strong></h2><p>我们可以使用使用shape、 size和ndim函数来展示一个矩阵的形状、 大小和维数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个矩阵</span></span><br><span class="line">matrix = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">                   [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>],</span><br><span class="line">                   [<span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]])</span><br><span class="line"><span class="comment"># 查看矩阵的行数和列数</span></span><br><span class="line">matrix.shape</span><br><span class="line"><span class="comment"># (3, 4)</span></span><br><span class="line"><span class="comment"># 查看矩阵的元素数 (行 * 列)</span></span><br><span class="line">matrix.size</span><br><span class="line"><span class="comment"># 12</span></span><br><span class="line"><span class="comment"># 查看矩阵的维度</span></span><br><span class="line">matrix.ndim</span><br><span class="line"><span class="comment"># 2</span></span><br></pre></td></tr></table></figure>

<h2 id="对多个元素同时应用某个操作"><a href="#对多个元素同时应用某个操作" class="headerlink" title="对多个元素同时应用某个操作"></a><strong>对多个元素同时应用某个操作</strong></h2><p>NumPy的vectorize类将一个函数转换成另一个函数， 这个函数能把某个操作应用在数组的全部元素或一个切片上。值得注意的是， vectorize本质上是在对所有元素循环执行某个操作， 所以并不会提升性能。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个矩阵</span></span><br><span class="line">matrix = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">                   [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>],</span><br><span class="line">                   [<span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]])</span><br><span class="line"><span class="comment"># 创建一个函数，给返回输入值加上100</span></span><br><span class="line">add_100 = <span class="keyword">lambda</span> i: i + <span class="number">100</span></span><br><span class="line"><span class="comment"># 创建向量化函数</span></span><br><span class="line">vectorized_add_100 = np.vectorize(add_100)</span><br><span class="line"><span class="comment"># 将函数应用到矩阵中的所有元素</span></span><br><span class="line">vectorized_add_100(matrix)</span><br><span class="line"><span class="comment"># array([[101, 102, 103, 104],</span></span><br><span class="line"><span class="comment">#        [105, 106, 107, 108],</span></span><br><span class="line"><span class="comment">#        [109, 110, 111, 112]])</span></span><br></pre></td></tr></table></figure>

<p>使用NumPy的数组， 我们可以对两个维度不同的数组执行操作（这是一种叫作广播的方法） 。举个例子， 对于上述问题使用广播（broadcasting） 后， 我们的解决方案更简单。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">matrix+<span class="number">100</span></span><br><span class="line"><span class="comment"># array([[101, 102, 103, 104],</span></span><br><span class="line"><span class="comment">#        [105, 106, 107, 108],</span></span><br><span class="line"><span class="comment">#        [109, 110, 111, 112]])</span></span><br></pre></td></tr></table></figure>

<h2 id="找到最大值和最小值"><a href="#找到最大值和最小值" class="headerlink" title="找到最大值和最小值"></a><strong>找到最大值和最小值</strong></h2><p>我们可以使用NumPy的max和min函数计算一个数组的最大值或最小值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create matrix</span></span><br><span class="line">matrix = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">                   [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>],</span><br><span class="line">                   [<span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]])</span><br><span class="line"><span class="comment"># 返回最大值的元素</span></span><br><span class="line">np.<span class="built_in">max</span>(matrix)</span><br><span class="line"><span class="comment"># 12</span></span><br><span class="line"><span class="comment"># 返回最小值的元素</span></span><br><span class="line">np.<span class="built_in">min</span>(matrix)</span><br><span class="line"><span class="comment"># 1</span></span><br></pre></td></tr></table></figure>

<p>求一个数组或一个数组的子集中元素的最大值和最小值是很常见的需求， 使用max和min方法很容易实现。而使用axis参数则可以对一个特定的坐标轴应用此操作。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 返回每一列的最大值</span></span><br><span class="line">np.<span class="built_in">max</span>(matrix, axis=<span class="number">0</span>)</span><br><span class="line"><span class="comment"># array([ 9, 10, 11, 12])</span></span><br><span class="line"><span class="comment"># 返回每一行的最大值</span></span><br><span class="line">np.<span class="built_in">max</span>(matrix, axis=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># array([ 4,  8, 12])</span></span><br></pre></td></tr></table></figure>

<h2 id="计算平均值、-方差和标准差"><a href="#计算平均值、-方差和标准差" class="headerlink" title="计算平均值、 方差和标准差"></a><strong>计算平均值、 方差和标准差</strong></h2><p>我们可以使用NumPy的mean、 var和std 函数来计算数组的一些描述性统计值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create matrix</span></span><br><span class="line">matrix = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">                   [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>],</span><br><span class="line">                   [<span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]])</span><br><span class="line"><span class="comment"># 平均值</span></span><br><span class="line">np.mean(matrix)</span><br><span class="line"><span class="comment"># 6.5</span></span><br><span class="line"><span class="comment"># 方差</span></span><br><span class="line">np.var(matrix)</span><br><span class="line"><span class="comment"># 11.916666666666666</span></span><br><span class="line"><span class="comment"># 标准差</span></span><br><span class="line">np.std(matrix)</span><br><span class="line"><span class="comment"># 3.452052529534663</span></span><br></pre></td></tr></table></figure>

<p>当然，我们也可以计算每一列或者每一行的均值等。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 每一列的均值np.mean(matrix, axis=0)</span></span><br><span class="line"><span class="comment"># array([5., 6., 7., 8.])</span></span><br></pre></td></tr></table></figure>

<h2 id="矩阵变形"><a href="#矩阵变形" class="headerlink" title="矩阵变形"></a><strong>矩阵变形</strong></h2><p>我们可以使用NumPy的reshape函数在不改变元素值的前提下， 改变一个数组的形状（行数和列数）。reshape可以重构一个数组， 维持该数组原来的数据不变， 只改变行数和列数。唯一的要求就是原矩阵和新矩阵包含的元素数量必须相同（也就是大小相同） 。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个4*3矩阵</span></span><br><span class="line">matrix = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">                   [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">                   [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>],</span><br><span class="line">                   [<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]])</span><br><span class="line"><span class="comment"># 变形为2x6矩阵</span></span><br><span class="line">matrix.reshape(<span class="number">2</span>, <span class="number">6</span>)</span><br><span class="line"><span class="comment"># array([[ 1, 2, 3, 4, 5, 6],</span></span><br><span class="line"><span class="comment">#        [ 7, 8, 9, 10, 11, 12]])</span></span><br></pre></td></tr></table></figure>

<p>reshape能传入一个非常有用的参数值-1， 表示可以“根据需要填充元素”， 所以reshape(1, -1)意味着矩阵的行数是1， 而列数则根据需要填充。</p>
<p>如果只提供一个整数作为参数， 那么reshape会返回一个长度为该整数值的一维数组。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">matrix.reshape(<span class="number">1</span>,-<span class="number">1</span>)</span><br><span class="line"><span class="comment"># array([[ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12]])</span></span><br><span class="line">matrix.reshape(<span class="number">12</span>)</span><br><span class="line"><span class="comment"># array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12])</span></span><br></pre></td></tr></table></figure>

<h2 id="转置向量或矩阵"><a href="#转置向量或矩阵" class="headerlink" title="转置向量或矩阵"></a><strong>转置向量或矩阵</strong></h2><p>我们可以使用T函数转置一个向量或矩阵。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create matrix</span></span><br><span class="line">matrix = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">                   [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>],</span><br><span class="line">                   [<span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]])</span><br><span class="line"><span class="comment"># 转置矩阵</span></span><br><span class="line">matrix.T</span><br><span class="line"><span class="comment"># array([[ 1,  5,  9],</span></span><br><span class="line"><span class="comment">#        [ 2,  6, 10],</span></span><br><span class="line"><span class="comment">#        [ 3,  7, 11],</span></span><br><span class="line"><span class="comment">#        [ 4,  8, 12]])</span></span><br></pre></td></tr></table></figure>

<p>转置在线性代数中是很常见的操作， 它将每个元素的行、 列下标互换。在线性代数范围外有一点常被忽视：严格来说一个向量是不能被转置的， 因为它只是值的集合。</p>
<p>转置一个向量通常是指将行向量转换为列向量（注意第2对括号） ， 或反向转换。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]).T</span><br><span class="line"><span class="comment"># array([1, 2, 3, 4, 5, 6])</span></span><br><span class="line"><span class="comment"># 转置行向量</span></span><br><span class="line">np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]]).T</span><br><span class="line"><span class="comment"># array([[1],</span></span><br><span class="line"><span class="comment">#        [2],</span></span><br><span class="line"><span class="comment">#        [3],</span></span><br><span class="line"><span class="comment">#        [4],</span></span><br><span class="line"><span class="comment">#        [5],</span></span><br><span class="line"><span class="comment">#        [6]])</span></span><br></pre></td></tr></table></figure>

<h2 id="展开一个矩阵"><a href="#展开一个矩阵" class="headerlink" title="展开一个矩阵"></a><strong>展开一个矩阵</strong></h2><p>在Numpy中可以使用flatten将矩阵转换成一个一维数组。 此外，也可以使用reshape来创建一个行向量。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 加载库</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># 建立矩阵</span></span><br><span class="line">matrix = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">                   [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">                   [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"><span class="comment"># 展开矩阵</span></span><br><span class="line">matrix.flatten()</span><br><span class="line"><span class="comment"># array([1, 2, 3, 4, 5, 6, 7, 8, 9])</span></span><br><span class="line">matrix.reshape(<span class="number">1</span>, -<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<h2 id="计算矩阵的秩"><a href="#计算矩阵的秩" class="headerlink" title="计算矩阵的秩"></a><strong>计算矩阵的秩</strong></h2><p>矩阵的秩（Rank）是一个重要的线性代数概念，它用于衡量矩阵中的线性独立性。矩阵的秩就是由它的列或行展开的向量空间的维数。我们可以使用NumPy中的线性代数方法matrix_rank计算矩阵的秩。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create matrix</span></span><br><span class="line">matrix = np.array([[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">                   [<span class="number">1</span>, <span class="number">1</span>, <span class="number">10</span>],</span><br><span class="line">                   [<span class="number">1</span>, <span class="number">1</span>, <span class="number">15</span>]])</span><br><span class="line"><span class="comment">#返回矩阵的秩</span></span><br><span class="line">np.linalg.matrix_rank(matrix)</span><br><span class="line"><span class="comment"># 2</span></span><br></pre></td></tr></table></figure>

<h2 id="计算行列式"><a href="#计算行列式" class="headerlink" title="计算行列式"></a><strong>计算行列式</strong></h2><p>矩阵的行列式（Determinant）是一个标量值，它与方阵（即行数等于列数的矩阵）相关联。行列式的计算通常用于线性代数中，具有许多重要的数学和工程应用。行列式用于描述矩阵的性质，如矩阵是否可逆、矩阵的秩、线性方程组的解等。对于一个n × n的方阵A，它的行列式通常表示为det(A)或|A|。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create matrix</span></span><br><span class="line">matrix = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">                  [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>],</span><br><span class="line">                  [<span class="number">3</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"><span class="comment"># Return determinant of matrix</span></span><br><span class="line">np.linalg.det(matrix)</span><br><span class="line"><span class="comment"># 0.0</span></span><br></pre></td></tr></table></figure>

<h2 id="获取矩阵的对角线元素"><a href="#获取矩阵的对角线元素" class="headerlink" title="获取矩阵的对角线元素"></a><strong>获取矩阵的对角线元素</strong></h2><p>矩阵的对角线元素是指矩阵中位于从左上角到右下角的主对角线上的元素。主对角线是指行数和列数相等的情况下，矩阵的第1行、第1列、第2行、第2列等相交的位置上的元素。对角线元素通常表示为 <code>a[i][i]</code>，其中 <code>i</code> 是行索引和列索引相等的位置。对角线元素在矩阵理论和线性代数中具有重要的作用，它们有以下用途：</p>
<ul>
<li>矩阵的迹（Trace）：矩阵的迹是对角线元素的和，通常表示为 <code>Tr(A)</code>，其中 <code>A</code> 是矩阵。迹在计算中常用于一些数学证明和运算中，具有特殊的性质。</li>
<li>矩阵的特征值（Eigenvalues）：矩阵的特征值是矩阵线性变换中非常重要的概念，它们通过求解矩阵的特征方程获得。对角线元素对特征值的计算和性质具有影响。</li>
<li>矩阵的行列式（Determinant）：行列式是矩阵的一个标量值，对角线元素的乘积减去反对角线元素的乘积用于计算二维矩阵的行列式，而三维及更高维的矩阵行列式的计算也涉及到对角线元素。</li>
<li>矩阵的正定性：对角线元素在判断矩阵的正定性、半正定性、负定性等性质时起到关键作用。正定矩阵的对角线元素必须为正数。</li>
<li>对称矩阵：对角线元素通常在对称矩阵中具有特殊性质，因为对称矩阵的非对角线元素与其对应的对角线元素是相等的。</li>
<li>矩阵的压缩表示：对于稀疏矩阵，对角线元素通常具有特殊的存储方式，因为它们是矩阵中较为密集的部分。</li>
</ul>
<p>使用NumPy的diagonal很容易获取矩阵的对角线元素。 我们还可以使用ffset参数在主对角线的上下偏移， 获取偏移后的对角线方向的元素：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create matrix</span></span><br><span class="line">matrix = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">                   [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>],</span><br><span class="line">                   [<span class="number">3</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"><span class="comment">#返回对角线元素</span></span><br><span class="line">matrix.diagonal()</span><br><span class="line"><span class="comment"># array([1, 4, 9])</span></span><br><span class="line"><span class="comment"># 返回主对角线上偏移量为1的对角线元素</span></span><br><span class="line">matrix.diagonal(offset=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># array([2, 6])</span></span><br><span class="line"><span class="comment"># 返回主对角线下方偏移量为1的对角线元素</span></span><br><span class="line">matrix.diagonal(offset=-<span class="number">1</span>)</span><br><span class="line"><span class="comment"># array([2, 8])</span></span><br></pre></td></tr></table></figure>

<h2 id="计算矩阵的迹"><a href="#计算矩阵的迹" class="headerlink" title="计算矩阵的迹"></a><strong>计算矩阵的迹</strong></h2><p>矩阵的迹是其对角线元素之和， 常被用在机器学习方法的底层计算中。给定一个NumPy的多维数组， 使用trace就能计算出它的迹。 我们还可以通过先返回矩阵的对角线元素再对其求和的方式来计算矩阵的迹。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create matrix</span></span><br><span class="line">matrix = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">                   [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>],</span><br><span class="line">                   [<span class="number">3</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"><span class="comment"># 返回迹（对角线之和）</span></span><br><span class="line">matrix.trace()</span><br><span class="line"><span class="comment"># 14</span></span><br><span class="line"><span class="comment"># 返回对角线元素之和</span></span><br><span class="line"><span class="built_in">sum</span>(matrix.diagonal())</span><br></pre></td></tr></table></figure>

<h2 id="计算特征值和特征向量"><a href="#计算特征值和特征向量" class="headerlink" title="计算特征值和特征向量"></a><strong>计算特征值和特征向量</strong></h2><p>矩阵的特征值（Eigenvalue）和特征向量（Eigenvector）是线性代数中的重要概念。</p>
<p>对于一个方阵（即行数等于列数的矩阵）A，其特征值是一个标量 λ，它满足以下方程：A * v &#x3D; λ * v，这里，A是一个方阵，v是一个非零向量，λ是特征值。特征值告诉我们在矩阵A的作用下，向量v只发生了缩放，而没有改变方向。特征值可以是实数或复数。特征向量是与特征值相关联的向量。对于方阵A和对应的特征值λ，特征向量v是一个非零向量，它满足上述方程。特征向量描述了在矩阵作用下，向量v的方向不变，只发生了缩放。</p>
<p>特征值和特征向量在多个领域中有广泛的应用，包括：主成分分析（PCA）—特征值和特征向量用于降维数据集，以便在保留数据的主要变化方向的同时减少维度、机器学习—在机器学习中，特征值和特征向量可用于降维、特征选择和数据变换等任务等方面。</p>
<p>使用NumPy的linalg.eig 能计算出任何方阵的特征值和特征向量。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create matrix</span></span><br><span class="line">matrix = np.array([[<span class="number">1</span>, -<span class="number">1</span>, <span class="number">3</span>],</span><br><span class="line">                   [<span class="number">1</span>, <span class="number">1</span>, <span class="number">6</span>],</span><br><span class="line">                   [<span class="number">3</span>, <span class="number">8</span>, <span class="number">9</span>]])</span><br><span class="line"><span class="comment">#计算特征值和特征向量</span></span><br><span class="line">eigenvalues, eigenvectors = np.linalg.eig(matrix)</span><br><span class="line"><span class="comment"># 查看特征值</span></span><br><span class="line">eigenvalues</span><br><span class="line"><span class="comment"># array([ 13.55075847, 0.74003145, -3.29078992])</span></span><br><span class="line"><span class="comment"># 查看特征向量</span></span><br><span class="line">eigenvectors</span><br><span class="line"><span class="comment"># array([[-2.52429940e-01, -9.48683298e-01, -3.38042383e-01],</span></span><br><span class="line"><span class="comment">#        [-5.04859881e-01, -4.50923270e-17, -6.76084766e-01],</span></span><br><span class="line"><span class="comment">#        [-8.25466914e-01,  3.16227766e-01,  6.54703549e-01]])</span></span><br></pre></td></tr></table></figure>

<h2 id="计算点积"><a href="#计算点积" class="headerlink" title="计算点积"></a><strong>计算点积</strong></h2><p>矩阵的点积，也称为矩阵乘法或矩阵内积，是一种矩阵运算，用于将两个矩阵相乘，产生一个新的矩阵。矩阵点积的用处非常广泛，特别是在线性代数、统计学、机器学习和工程领域中。</p>
<p>点积的定义如下：假设有两个矩阵A和B，如果A的列数等于B的行数，则可以计算它们的点积。点积的结果矩阵C的元素c_ij等于A的第i行与B的第j列对应元素的乘积之和。具体表达式如下：C &#x3D; A × B，其中，C是结果矩阵，A和B是要相乘的矩阵。</p>
<p>点积的用处包括：</p>
<ul>
<li>线性代数：矩阵点积在线性代数中是一项基本操作。它可以用来解线性方程组、求解特征值和特征向量、计算矩阵的逆等。</li>
<li>数据变换：在统计学和数据分析中，矩阵点积用于数据的变换和降维。例如，主成分分析（PCA）就是通过计算数据协方差矩阵的特征向量和特征值来实现的。</li>
<li>神经网络：在神经网络和深度学习中，矩阵点积是神经网络层之间的主要运算。神经网络的前向传播和反向传播都依赖于矩阵点积来计算权重和激活值之间的关系。</li>
<li>图像处理：在图像处理中，卷积操作通常涉及矩阵点积，用于图像滤波和特征提取。</li>
<li>工程和物理学：矩阵点积在工程和物理学中用于描述复杂的物理系统，如电路分析、机械系统建模等。</li>
</ul>
<p>可以使用NumPy的dot来计算点积， 或者在ython 3.5以上的版本中使用新操作符@计算点积。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 建立两个向量</span></span><br><span class="line">vector_a = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">vector_b = np.array([<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])</span><br><span class="line"><span class="comment"># 计算点积</span></span><br><span class="line">np.dot(vector_a, vector_b)</span><br><span class="line"><span class="comment"># 32</span></span><br></pre></td></tr></table></figure>

<h2 id="矩阵的相加或相减"><a href="#矩阵的相加或相减" class="headerlink" title="矩阵的相加或相减"></a><strong>矩阵的相加或相减</strong></h2><p>使用NumPy的add和subtract函数可以实现矩阵的加减。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 建立矩阵</span></span><br><span class="line">matrix_a = np.array([[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">                     [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">                     [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>]])</span><br><span class="line"><span class="comment"># 建立矩阵</span></span><br><span class="line">matrix_b = np.array([[<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>],</span><br><span class="line">                     [<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>],</span><br><span class="line">                     [<span class="number">1</span>, <span class="number">3</span>, <span class="number">8</span>]])</span><br><span class="line"><span class="comment"># 两个矩阵相加</span></span><br><span class="line">np.add(matrix_a, matrix_b)</span><br><span class="line"><span class="comment"># array([[ 2,  4,  2],</span></span><br><span class="line"><span class="comment">#        [ 2,  4,  2],</span></span><br><span class="line"><span class="comment">#        [ 2,  4, 10]])</span></span><br><span class="line"><span class="comment"># 两个矩阵相减</span></span><br><span class="line">np.subtract(matrix_a, matrix_b)</span><br><span class="line"><span class="comment"># array([[ 0, -2,  0],</span></span><br><span class="line"><span class="comment">#        [ 0, -2,  0],</span></span><br><span class="line"><span class="comment">#        [ 0, -2, -6]])</span></span><br><span class="line"><span class="comment"># 两个矩阵相加</span></span><br></pre></td></tr></table></figure>

<p>当然，也可以直接使用+或-号</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">matrix_a + matrix_b</span><br></pre></td></tr></table></figure>

<h2 id="矩阵的乘法"><a href="#矩阵的乘法" class="headerlink" title="矩阵的乘法"></a><strong>矩阵的乘法</strong></h2><p>使用NumPy的dot或者在Python 3.5以上的版本中使用“@”操作符可以实现矩阵的乘法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create matrix</span></span><br><span class="line">matrix_a = np.array([[<span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">                     [<span class="number">1</span>, <span class="number">2</span>]])</span><br><span class="line"><span class="comment"># Create matrix</span></span><br><span class="line">matrix_b = np.array([[<span class="number">1</span>, <span class="number">3</span>],</span><br><span class="line">                     [<span class="number">1</span>, <span class="number">2</span>]])</span><br><span class="line"><span class="comment"># M两个矩阵相乘</span></span><br><span class="line">np.dot(matrix_a, matrix_b)</span><br><span class="line"><span class="comment"># array([[2, 5],</span></span><br><span class="line"><span class="comment">#        [3, 7]])</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用@实现两个矩阵相乘</span></span><br><span class="line">matrix_a @ matrix_b</span><br></pre></td></tr></table></figure>

<p>如要要将两个矩阵对应的元素相乘，则需要使用*</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 两个矩阵对应的元素相乘</span></span><br><span class="line">matrix_a * matrix_b</span><br><span class="line"><span class="comment"># array([[1, 3],</span></span><br><span class="line"><span class="comment">#        [1, 4]])</span></span><br></pre></td></tr></table></figure>

<h2 id="计算矩阵的逆"><a href="#计算矩阵的逆" class="headerlink" title="计算矩阵的逆"></a><strong>计算矩阵的逆</strong></h2><p>矩阵的逆是矩阵的一种特殊性质，它通常用于解线性方程组和进行线性变换的逆操作。</p>
<p>对于一个方阵（即行数和列数相等的矩阵）A，如果存在另一个方阵B，使得它们的乘积为单位矩阵（记作I），即A乘以B等于I，那么矩阵B就被称为矩阵A的逆，通常表示为A的负一次方（A⁻¹），表示如下：A * A⁻¹ &#x3D; A⁻¹ * A &#x3D; I，其中，A表示原始矩阵，A⁻¹表示它的逆矩阵，I表示单位矩阵。</p>
<p>使用NumPy中的线性代数方法inv可以计算一个矩阵的逆。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create matrix</span></span><br><span class="line">matrix = np.array([[<span class="number">1</span>, <span class="number">4</span>],</span><br><span class="line">                   [<span class="number">2</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="comment"># 计算矩阵的逆</span></span><br><span class="line">np.linalg.inv(matrix)</span><br><span class="line"><span class="comment"># array([[-1.66666667, 1.33333333],</span></span><br><span class="line"><span class="comment">#        [ 0.66666667, -0.33333333]])</span></span><br><span class="line"><span class="comment"># 矩阵和矩阵的逆相乘</span></span><br><span class="line">matrix @ np.linalg.inv(matrix)</span><br><span class="line"><span class="comment"># array([[ 1., 0.],</span></span><br><span class="line"><span class="comment">#        [ 0., 1.]])</span></span><br></pre></td></tr></table></figure>

<h2 id="生成随机数"><a href="#生成随机数" class="headerlink" title="生成随机数"></a><strong>生成随机数</strong></h2><p>使用NumPy的random函数可以生成随机数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置随机种子</span></span><br><span class="line">np.random.seed(<span class="number">0</span>)</span><br><span class="line"><span class="comment"># 生成3个0-1之间的浮点数</span></span><br><span class="line">np.random.random(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># array([0.5488135 , 0.71518937, 0.60276338])</span></span><br><span class="line"><span class="comment"># 产生3个3-10之间的随机整数</span></span><br><span class="line">np.random.randint(<span class="number">0</span>, <span class="number">11</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment"># array([3, 7, 9])</span></span><br><span class="line"><span class="comment"># 从均值是0且标准差是1的正态分布数据中随机抽取3个数</span></span><br><span class="line">np.random.normal(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment"># array([-1.42232584,  1.52006949, -0.29139398])</span></span><br><span class="line"><span class="comment"># 从均值为0且散布程度是1的逻辑分布中随机抽取3个数</span></span><br><span class="line">np.random.logistic(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment"># array([-0.98118713, -0.08939902,  1.46416405])</span></span><br><span class="line"><span class="comment"># 从大于或等于1且小于2的数中随机抽取3个数</span></span><br><span class="line">np.random.uniform(<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment"># array([ 1.47997717, 1.3927848 , 1.83607876])</span></span><br></pre></td></tr></table></figure>

<h1 id="Python中的数据整理"><a href="#Python中的数据整理" class="headerlink" title="Python中的数据整理"></a><strong>Python中的数据整理</strong></h1><p>数据整理在数据分析中至关重要。在Python中进行数据整理通常包括数据清洗、转换和重塑。数据整理的思路主要包括以下：</p>
<ol>
<li>数据清洗：</li>
</ol>
<p>处理缺失数据：使用Pandas库的<code>dropna()</code>、<code>fillna()</code>等方法来处理缺失数据。</p>
<p>处理异常值：通过定义阈值或使用统计方法来检测和处理异常值。</p>
<p>处理重复数据：使用Pandas的<code>duplicated()</code>和<code>drop_duplicates()</code>来处理重复数据。</p>
<p>格式规范化：将数据类型转换为合适的格式，如日期时间或数字类型。</p>
<ol start="2">
<li>数据转换：</li>
</ol>
<p>列选择：使用Pandas的<code>df[&#39;column_name&#39;]</code>来选择特定列。</p>
<p>列重命名：使用<code>df.rename(columns=&#123;&#39;old_name&#39;: &#39;new_name&#39;&#125;)</code>来重命名列。</p>
<p>数据类型转换：使用<code>astype()</code>方法将列的数据类型更改为合适的类型。</p>
<p>文本数据处理：使用字符串方法（如<code>str.strip()</code>、<code>str.lower()</code>）处理文本列。</p>
<p>分组和聚合：使用Pandas的<code>groupby()</code>和聚合函数（如<code>sum()</code>、<code>mean()</code>）对数据进行分组和汇总。</p>
<ol start="3">
<li>数据重塑：</li>
</ol>
<p>透视表：使用Pandas的<code>pivot_table()</code>或<code>pivot()</code>来创建透视表。</p>
<p>堆叠和解堆叠：使用<code>stack()</code>和<code>unstack()</code>来重塑数据框。</p>
<p>合并数据：使用<code>merge()</code>或<code>concat()</code>来合并多个数据框。</p>
<p>长格式转宽格式和反之：使用<code>melt()</code>和<code>pivot()</code>来在长格式和宽格式之间进行转换。</p>
<ol start="4">
<li><p>数据可视化：使用Matplotlib、Seaborn或其他数据可视化库来探索数据，识别模式和趋势。绘制直方图、箱线图、散点图等来了解数据分布和相关性。</p>
</li>
<li><p>自定义函数：创建自定义函数来处理特定数据整理需求，例如基于条件的数据清洗、文本提取等。</p>
</li>
<li><p>数据管道：使用Pandas管道（<code>pipe</code>）来构建数据整理工作流，使代码更整洁和可维护。</p>
</li>
<li><p>数据保存：使用<code>to_csv()</code>、<code>to_excel()</code>等方法将整理后的数据保存到文件，以备后续分析或分享。</p>
</li>
</ol>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a><strong>简介</strong></h2><p>“数据整理（data wrangling） ”是一个被广泛使用的词， 经常用于描述将原始数据转换成整洁的、 组织合理的形式以供使用的过程。对于我们而言， 数据整理只是数据预处理中的一个步骤， 但它是一个重要的步骤。在“整理”数据时， 最常用的数据结构是数据帧（data frame） ， 它既直观又灵活。数据帧是呈表格状的， 也就是说， 就像你在数据表中看到的数据一样， 数据帧是用行和列来表示数据的。下面给出一个用泰坦尼克号乘客的数据创建的数据帧：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Load library</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="comment"># Create URL</span></span><br><span class="line">url = <span class="string">&#x27;https://raw.githubusercontent.com/chrisalbon/simulated_datasets/master/titanic.csv&#x27;</span></span><br><span class="line"><span class="comment"># 将数据加载为数据框</span></span><br><span class="line">dataframe = pd.read_csv(url)</span><br><span class="line"><span class="comment"># 展示前五行</span></span><br><span class="line">dataframe.head(<span class="number">5</span>)</span><br><span class="line"><span class="comment"># Out[16]: </span></span><br><span class="line"><span class="comment">#                                             Name PClass  ...  Survived SexCode</span></span><br><span class="line"><span class="comment"># 0                   Allen, Miss Elisabeth Walton    1st  ...         1       1</span></span><br><span class="line"><span class="comment"># 1                    Allison, Miss Helen Loraine    1st  ...         0       1</span></span><br><span class="line"><span class="comment"># 2            Allison, Mr Hudson Joshua Creighton    1st  ...         0       0</span></span><br><span class="line"><span class="comment"># 3  Allison, Mrs Hudson JC (Bessie Waldo Daniels)    1st  ...         0       1</span></span><br><span class="line"><span class="comment"># 4                  Allison, Master Hudson Trevor    1st  ...         1       0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [5 rows x 6 columns]</span></span><br></pre></td></tr></table></figure>

<p>在这个数据帧中有三件重要的事情需要注意。第一， 在一个数据帧中， 每一行都对应一个观察值（例如， 一位乘客） ， 每一列都对应一个特征（性别、 年龄等） 。举个例子， 通过查看第一个观察值可知， Elisabeth Walton Allen小姐住在头等舱， 当年29， 在灾难中活了下来。第二， 每一列有一个数据头（例如， Name、 PClass、 Age） ， 每一行有一个索引（例如， 这位幸运的Elisabeth Walton Allen小姐的索引号是0） 。这些数据能用于选择及操作观察值与特征。第三， Sex和SexCode这两列虽然用的是不同的表现形式， 但是包含了同样的信息。在Sex列中， 女性用字符串female表示， 而在SexCode列中，女性用整数1表示。如果想让所有的特征都是唯一的， 需要删除这两列中的一列。在本章中， 为了创建一组整洁、 组织合理的观察值以供接下来的预处理之用， 我们会调用pandas库， 使用各种不同的方法来操作数据帧。</p>
<h2 id="创建一个数据帧"><a href="#创建一个数据帧" class="headerlink" title="创建一个数据帧"></a><strong>创建一个数据帧</strong></h2><p>在pandas中有很多方法可以创建一个新的数据帧对象。一个简单的方法是， 使用DataFrame创建一个空数据帧并分别定义好每一列：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3.1 创建一个数据帧</span></span><br><span class="line"><span class="comment"># 创建数据框</span></span><br><span class="line">dataframe = pd.DataFrame()</span><br><span class="line"><span class="comment"># 添加列</span></span><br><span class="line">dataframe[<span class="string">&#x27;Name&#x27;</span>] = [<span class="string">&#x27;Jacky Jackson&#x27;</span>, <span class="string">&#x27;Steven Stevenson&#x27;</span>]</span><br><span class="line">dataframe[<span class="string">&#x27;Age&#x27;</span>] = [<span class="number">38</span>, <span class="number">25</span>]</span><br><span class="line">dataframe[<span class="string">&#x27;Driver&#x27;</span>] = [<span class="literal">True</span>, <span class="literal">False</span>]</span><br><span class="line"><span class="comment"># 展示数据框</span></span><br><span class="line">dataframe</span><br><span class="line"><span class="comment"># Out[23]: </span></span><br><span class="line"><span class="comment">#                Name  Age  Driver</span></span><br><span class="line"><span class="comment"># 0     Jacky Jackson   38    True</span></span><br><span class="line"><span class="comment"># 1  Steven Stevenson   25   False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建行</span></span><br><span class="line">new_person = pd.Series([<span class="string">&#x27;Molly Mooney&#x27;</span>, <span class="number">40</span>, <span class="literal">True</span>], index=[<span class="string">&#x27;Name&#x27;</span>,<span class="string">&#x27;Age&#x27;</span>,<span class="string">&#x27;Driver&#x27;</span>])</span><br><span class="line"><span class="comment"># 添加行</span></span><br><span class="line">dataframe.append(new_person, ignore_index=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># Out[25]: </span></span><br><span class="line"><span class="comment">#                Name  Age  Driver</span></span><br><span class="line"><span class="comment"># 0     Jacky Jackson   38    True</span></span><br><span class="line"><span class="comment"># 1  Steven Stevenson   25   False</span></span><br><span class="line"><span class="comment"># 2      Molly Mooney   40    True</span></span><br></pre></td></tr></table></figure>

<p>虽然pandas提供了无数方法来创建数据帧， 但是在真实场景中， 创建一个空的数据帧对象然后再填充数据的情况几乎不会发生。相反， 我们将通过加载自其他源（例如， 一个CSV文件或数据库） 的真实数据创建数据帧。</p>
<h2 id="描述数据"><a href="#描述数据" class="headerlink" title="描述数据"></a><strong>描述数据</strong></h2><p>在加载完数据之后， 我们能做的最简单的事之一就是使用head查看前几行数据：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 加载数据</span></span><br><span class="line">dataframe = pd.read_csv(url)</span><br><span class="line"><span class="comment"># 展示前两行</span></span><br><span class="line">dataframe.head(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># Out[27]: </span></span><br><span class="line"><span class="comment">#                            Name PClass   Age     Sex  Survived  SexCode</span></span><br><span class="line"><span class="comment"># 0  Allen, Miss Elisabeth Walton    1st  29.0  female         1        1</span></span><br><span class="line"><span class="comment"># 1   Allison, Miss Helen Loraine    1st   2.0  female         0        1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 展示数据维度</span></span><br><span class="line">dataframe.shape</span><br><span class="line"><span class="comment"># Out[28]: (1313, 6)</span></span><br></pre></td></tr></table></figure>

<p>或者， 也可以使用describe来获取任何数值型列的描述性统计量：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 展示描述性统计结果</span></span><br><span class="line">dataframe.describe()</span><br><span class="line"><span class="comment"># Out[30]: </span></span><br><span class="line"><span class="comment">#               Age     Survived      SexCode</span></span><br><span class="line"><span class="comment"># count  756.000000  1313.000000  1313.000000</span></span><br><span class="line"><span class="comment"># mean    30.397989     0.342727     0.351866</span></span><br><span class="line"><span class="comment"># std     14.259049     0.474802     0.477734</span></span><br><span class="line"><span class="comment"># min      0.170000     0.000000     0.000000</span></span><br><span class="line"><span class="comment"># 25%     21.000000     0.000000     0.000000</span></span><br><span class="line"><span class="comment"># 50%     28.000000     0.000000     0.000000</span></span><br><span class="line"><span class="comment"># 75%     39.000000     1.000000     1.000000</span></span><br><span class="line"><span class="comment"># max     71.000000     1.000000     1.000000</span></span><br></pre></td></tr></table></figure>

<p>加载数据后， 最好了解一下它的结构以及包含了什么类型的信息。理想的情况是直接查看全部数据。但是在现实中， 很多情况下数据都会包含成千上万的行和列。这时， 我们可以选取一些样本来查看一小部分数据， 也可以利用样本来计算数据的描述性统计量。</p>
<p>在上述解决方案中， 我们用到了由泰坦尼克号的乘客记录组成的玩具数据集。使用head可以查看数据集的前几行（默认查看前5行） ， 使用tail可以查看最后几行；使用shape可以查看数据帧中包含了多少行和多少列；最后， 使用describe能查看任何数值型的列的基本描述性统计量。</p>
<p>值得注意的是， 描述性统计量并不一定能全面反映数据的情况。例如，pandas将Survived和SexCode视为数值型的列， 因为它们包含了很多0和1。然而， 在本例中， 数值型的值代表的是分类（例如， 如果Survived等于1， 就表示乘客在此次海难中幸存） 。由于这个原因， 一些描述性统计量， 比如SexCode（代表乘客的性别） 列的标准差， 不能提供很直观的结论。</p>
<h2 id="浏览数据帧"><a href="#浏览数据帧" class="headerlink" title="浏览数据帧"></a><strong>浏览数据帧</strong></h2><p>使用loc或iloc能选择一个或多个数据， 也能选择一行或多行数据：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 选择第一行</span></span><br><span class="line">dataframe.iloc[<span class="number">0</span>]</span><br><span class="line"><span class="comment"># Out[31]: </span></span><br><span class="line"><span class="comment"># Name        Allen, Miss Elisabeth Walton</span></span><br><span class="line"><span class="comment"># PClass                               1st</span></span><br><span class="line"><span class="comment"># Age                                 29.0</span></span><br><span class="line"><span class="comment"># Sex                               female</span></span><br><span class="line"><span class="comment"># Survived                               1</span></span><br><span class="line"><span class="comment"># SexCode                                1</span></span><br><span class="line"><span class="comment"># Name: 0, dtype: object</span></span><br><span class="line"><span class="comment"># 可以使用冒号“: ”来定义想要选择哪些行。比如选择第2、 3、 4行：</span></span><br><span class="line"><span class="comment"># 选择3行</span></span><br><span class="line">dataframe.iloc[<span class="number">1</span>:<span class="number">4</span>]</span><br><span class="line"><span class="comment"># Out[32]: </span></span><br><span class="line"><span class="comment">#                                             Name PClass  ...  Survived SexCode</span></span><br><span class="line"><span class="comment"># 1                    Allison, Miss Helen Loraine    1st  ...         0       1</span></span><br><span class="line"><span class="comment"># 2            Allison, Mr Hudson Joshua Creighton    1st  ...         0       0</span></span><br><span class="line"><span class="comment"># 3  Allison, Mrs Hudson JC (Bessie Waldo Daniels)    1st  ...         0       1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择前4行</span></span><br><span class="line">dataframe.iloc[:<span class="number">4</span>]</span><br><span class="line"><span class="comment"># Out[33]: </span></span><br><span class="line"><span class="comment">#                                             Name PClass  ...  Survived SexCode</span></span><br><span class="line"><span class="comment"># 0                   Allen, Miss Elisabeth Walton    1st  ...         1       1</span></span><br><span class="line"><span class="comment"># 1                    Allison, Miss Helen Loraine    1st  ...         0       1</span></span><br><span class="line"><span class="comment"># 2            Allison, Mr Hudson Joshua Creighton    1st  ...         0       0</span></span><br><span class="line"><span class="comment"># 3  Allison, Mrs Hudson JC (Bessie Waldo Daniels)    1st  ...         0       1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [4 rows x 6 columns]</span></span><br></pre></td></tr></table></figure>

<p>数据帧的索引不必非得是数值型。只要某一列在数据帧中每一行的值是唯一的， 就可以将其设置为索引。举个例子， 我们可以将乘客的名字设置为索引， 然后通过名字来选择行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置索引</span></span><br><span class="line">dataframe = dataframe.set_index(dataframe[<span class="string">&#x27;Name&#x27;</span>])</span><br><span class="line"><span class="comment"># 展示行</span></span><br><span class="line">dataframe.loc[<span class="string">&#x27;Allen, Miss Elisabeth Walton&#x27;</span>]</span><br><span class="line"><span class="comment"># Out[35]: </span></span><br><span class="line"><span class="comment"># Name        Allen, Miss Elisabeth Walton</span></span><br><span class="line"><span class="comment"># PClass                               1st</span></span><br><span class="line"><span class="comment"># Age                                 29.0</span></span><br><span class="line"><span class="comment"># Sex                               female</span></span><br><span class="line"><span class="comment"># Survived                               1</span></span><br><span class="line"><span class="comment"># SexCode                                1</span></span><br><span class="line"><span class="comment"># Name: Allen, Miss Elisabeth Walton, dtype: object</span></span><br></pre></td></tr></table></figure>

<p>pandas的数据帧中所有的行都会有一个唯一的索引值。默认情况下， 这个索引是一个整数， 它标明了这一行在数据帧中的行的位置。然而， 索引不一定必须是这样的一个整数。数据帧的索引可以被设置成一个唯一的字母与数字组成的字符串或自定义数字。为了能选择一行或者部分行， pandas提供了两个方法：<br>● 当数据帧的索引是一个标签时（例如， 一个字符串） ,loc比较常用。<br>● iloc并不是根据索引来查找数据的， 而是根据行号来查找的， 行号从0开始， 逐次加1。举个例子， 不管索引是一个整数还是一个标签， iloc[0]都将返回第1行的数据。</p>
<p>由于在数据清洗时会频繁使用loc和iloc， 所以有必要熟悉它们。</p>
<h2 id="根据条件语句来选择行"><a href="#根据条件语句来选择行" class="headerlink" title="根据条件语句来选择行"></a><strong>根据条件语句来选择行</strong></h2><p>利用pandas可以根据某个条件语句来选择数据帧的行数据。例如， 选择泰坦尼克号上所有女性乘客的数据：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 加载数据</span></span><br><span class="line">dataframe = pd.read_csv(url)</span><br><span class="line"><span class="comment"># 展示前两行中性别是女性的观测值</span></span><br><span class="line">dataframe[dataframe[<span class="string">&#x27;Sex&#x27;</span>] == <span class="string">&#x27;female&#x27;</span>].head(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># Out[38]: </span></span><br><span class="line"><span class="comment">#                            Name PClass   Age     Sex  Survived  SexCode</span></span><br><span class="line"><span class="comment"># 0  Allen, Miss Elisabeth Walton    1st  29.0  female         1        1</span></span><br><span class="line"><span class="comment"># 1   Allison, Miss Helen Loraine    1st   2.0  female         0        1</span></span><br><span class="line"><span class="comment"># 要同时使用多个条件语句也很简单。 下面的代码就筛选出了所有年龄大于或等于65岁的女性乘客的行数据：</span></span><br><span class="line"><span class="comment"># 筛选行</span></span><br><span class="line">dataframe[(dataframe[<span class="string">&#x27;Sex&#x27;</span>] == <span class="string">&#x27;female&#x27;</span>) &amp; (dataframe[<span class="string">&#x27;Age&#x27;</span>] &gt;= <span class="number">65</span>)]</span><br><span class="line"><span class="comment"># Out[39]: </span></span><br><span class="line"><span class="comment">#                                                  Name PClass  ...  Survived SexCode</span></span><br><span class="line"><span class="comment"># 73  Crosby, Mrs Edward Gifford (Catherine Elizabet...    1st  ...         1       1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [1 rows x 6 columns]</span></span><br></pre></td></tr></table></figure>

<p>dataframe[‘Sex’] &#x3D;&#x3D; ‘female’就是条件语句。我们在它的外面包了一层dataframe[]来告诉pandas:“选择数据帧中所有dataFrame[‘Sex’]的值是’female’的行数据”。当然，在上面的代码中我们也可以设置多个条件</p>
<h2 id="替换值"><a href="#替换值" class="headerlink" title="替换值"></a><strong>替换值</strong></h2><p>用pandas的replace方法能很容易地找到并替换一些值。例如， 用＂Woman＂ 来替换Sex列中所有的＂ female＂ ：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 加载数据</span></span><br><span class="line">dataframe = pd.read_csv(url)</span><br><span class="line"><span class="comment"># 替换值展示前两行</span></span><br><span class="line">dataframe[<span class="string">&#x27;Sex&#x27;</span>].replace(<span class="string">&quot;female&quot;</span>, <span class="string">&quot;Woman&quot;</span>).head(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># 0    Woman</span></span><br><span class="line"><span class="comment"># 1    Woman</span></span><br><span class="line"><span class="comment"># Name: Sex, dtype: object</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 当然， 我们也能同时替换多个值：</span></span><br><span class="line"><span class="comment"># 将&quot;female&quot; 和 &quot;male 替换为 &quot;Woman&quot; 和 &quot;Man&quot;</span></span><br><span class="line">dataframe[<span class="string">&#x27;Sex&#x27;</span>].replace([<span class="string">&quot;female&quot;</span>, <span class="string">&quot;male&quot;</span>], [<span class="string">&quot;Woman&quot;</span>, <span class="string">&quot;Man&quot;</span>]).head(<span class="number">5</span>)</span><br><span class="line"><span class="comment"># Out[47]: </span></span><br><span class="line"><span class="comment"># 0    Woman</span></span><br><span class="line"><span class="comment"># 1    Woman</span></span><br><span class="line"><span class="comment"># 2      Man</span></span><br><span class="line"><span class="comment"># 3    Woman</span></span><br><span class="line"><span class="comment"># 4      Man</span></span><br><span class="line"><span class="comment"># Name: Sex, dtype: object</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以通过Dataframe对象在整个数据帧中查找和替换值， 而不仅限于在单个列中查找和替换值：</span></span><br><span class="line"><span class="comment"># 替换值，展示前两行</span></span><br><span class="line">dataframe.replace(<span class="number">1</span>, <span class="string">&quot;One&quot;</span>).head(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># Out[48]: </span></span><br><span class="line"><span class="comment">#                            Name PClass   Age     Sex Survived SexCode</span></span><br><span class="line"><span class="comment"># 0  Allen, Miss Elisabeth Walton    1st  29.0  female      One     One</span></span><br><span class="line"><span class="comment"># 1   Allison, Miss Helen Loraine    1st   2.0  female        0     One</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换也支持正则表达式</span></span><br><span class="line"><span class="comment"># 替换值，显示前两行</span></span><br><span class="line">dataframe.replace(<span class="string">r&quot;1st&quot;</span>, <span class="string">&quot;First&quot;</span>, regex=<span class="literal">True</span>).head(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># Out[49]: </span></span><br><span class="line"><span class="comment">#                            Name PClass   Age     Sex  Survived  SexCode</span></span><br><span class="line"><span class="comment"># 0  Allen, Miss Elisabeth Walton  First  29.0  female         1        1</span></span><br><span class="line"><span class="comment"># 1   Allison, Miss Helen Loraine  First   2.0  female         0        1</span></span><br></pre></td></tr></table></figure>

<p>replace是一个用来做值替换的工具， 很简单， 而且它还接受正则表达式， 所以它的功能其实很强大。</p>
<h2 id="重命名列"><a href="#重命名列" class="headerlink" title="重命名列"></a><strong>重命名列</strong></h2><p>用rename方法可以实现重命名列：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 加载数据</span></span><br><span class="line">dataframe = pd.read_csv(url)</span><br><span class="line"><span class="comment"># 列名重命名显示前两行</span></span><br><span class="line">dataframe.rename(columns=&#123;<span class="string">&#x27;PClass&#x27;</span>: <span class="string">&#x27;Passenger Class&#x27;</span>&#125;).head(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># Out[40]: </span></span><br><span class="line"><span class="comment">#                            Name Passenger Class  ...  Survived SexCode</span></span><br><span class="line"><span class="comment"># 0  Allen, Miss Elisabeth Walton             1st  ...         1       1</span></span><br><span class="line"><span class="comment"># 1   Allison, Miss Helen Loraine             1st  ...         0       1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [2 rows x 6 columns]</span></span><br></pre></td></tr></table></figure>

<p>rename方法可以传入一个字典作为参数。用字典可以同时改变多个列名：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dataframe.rename(columns=&#123;<span class="string">&#x27;PClass&#x27;</span>: <span class="string">&#x27;Passenger Class&#x27;</span>, <span class="string">&#x27;Sex&#x27;</span>: <span class="string">&#x27;Gender&#x27;</span>&#125;).head(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># Out[44]: </span></span><br><span class="line"><span class="comment">#                            Name Passenger Class  ...  Survived SexCode</span></span><br><span class="line"><span class="comment"># 0  Allen, Miss Elisabeth Walton             1st  ...         1       1</span></span><br><span class="line"><span class="comment"># 1   Allison, Miss Helen Loraine             1st  ...         0       1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [2 rows x 6 columns]</span></span><br></pre></td></tr></table></figure>

<p>以字典作为columns参数使用rename来重命名列是比较推荐的方法， 因为它能同时为多个列重命名。如果想同时为所有的列重命名， 下面这一小段代码会很有用。它以旧列名为键、 空字符串为值， 创建了一个字典：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 加载库</span></span><br><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"><span class="comment"># 创建字典</span></span><br><span class="line">column_names = collections.defaultdict(<span class="built_in">str</span>)</span><br><span class="line"><span class="comment"># 创建键</span></span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> dataframe.columns:column_names[name]</span><br><span class="line"><span class="comment"># 展示自定</span></span><br><span class="line">column_names</span><br><span class="line"><span class="comment"># Out[53]: </span></span><br><span class="line"><span class="comment"># defaultdict(str,</span></span><br><span class="line"><span class="comment">#             &#123;&#x27;Name&#x27;: &#x27;&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;PClass&#x27;: &#x27;&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;Age&#x27;: &#x27;&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;Sex&#x27;: &#x27;&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;Survived&#x27;: &#x27;&#x27;,</span></span><br><span class="line"><span class="comment">#              &#x27;SexCode&#x27;: &#x27;&#x27;&#125;)</span></span><br></pre></td></tr></table></figure>

<h2 id="计算最小值、-最大值、-总和、-平均值与计数值"><a href="#计算最小值、-最大值、-总和、-平均值与计数值" class="headerlink" title="计算最小值、 最大值、 总和、 平均值与计数值"></a><strong>计算最小值、 最大值、 总和、 平均值与计数值</strong></h2><p>pandas提供了一些内置的方法来计算常见的描述性统计量：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 加载数据</span></span><br><span class="line">dataframe = pd.read_csv(url)</span><br><span class="line"><span class="comment"># 计算统计量</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Maximum:&#x27;</span>, dataframe[<span class="string">&#x27;Age&#x27;</span>].<span class="built_in">max</span>())</span><br><span class="line"><span class="comment"># Maximum: 71.0</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Minimum:&#x27;</span>, dataframe[<span class="string">&#x27;Age&#x27;</span>].<span class="built_in">min</span>())</span><br><span class="line"><span class="comment"># Minimum: 0.17</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Mean:&#x27;</span>, dataframe[<span class="string">&#x27;Age&#x27;</span>].mean())</span><br><span class="line"><span class="comment"># Mean: 30.397989417989415</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Sum:&#x27;</span>, dataframe[<span class="string">&#x27;Age&#x27;</span>].<span class="built_in">sum</span>())</span><br><span class="line"><span class="comment"># Sum: 22980.88</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Count:&#x27;</span>, dataframe[<span class="string">&#x27;Age&#x27;</span>].count())</span><br><span class="line"><span class="comment"># Count: 756</span></span><br></pre></td></tr></table></figure>

<p>除了解决方案中用到的描述性统计量， pandas还提供了计算方差（var） 、 标准差（std） 、 峰态（kurt） 、 偏态（skew） 、 平均值标准误差（sem） 、 众数（mode） 、 中位数（median） 以及很多其他描述性统计量的方法。<br>此外， 也可以对整个数据帧应用这些方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看计数</span></span><br><span class="line">dataframe.count()</span><br><span class="line"><span class="comment"># Name        1313</span></span><br><span class="line"><span class="comment"># PClass      1313</span></span><br><span class="line"><span class="comment"># Age          756</span></span><br><span class="line"><span class="comment"># Sex         1313</span></span><br><span class="line"><span class="comment"># Survived    1313</span></span><br><span class="line"><span class="comment"># SexCode     1313</span></span><br><span class="line"><span class="comment"># dtype: int64</span></span><br></pre></td></tr></table></figure>

<h2 id="查找唯一值"><a href="#查找唯一值" class="headerlink" title="查找唯一值"></a><strong>查找唯一值</strong></h2><p>使用unique可以来查看由某一列中全部的唯一值组成的数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">dataframe = pd.read_csv(url)</span><br><span class="line"><span class="comment"># 选择唯一值</span></span><br><span class="line">dataframe[<span class="string">&#x27;Sex&#x27;</span>].unique()</span><br><span class="line"><span class="comment"># Out[63]: array([&#x27;female&#x27;, &#x27;male&#x27;], dtype=object)</span></span><br><span class="line"><span class="comment"># 还可以使用value_counts， 它会显示所有的唯一值以及它们出现的次数：</span></span><br><span class="line"><span class="comment"># 展示计数</span></span><br><span class="line">dataframe[<span class="string">&#x27;Sex&#x27;</span>].value_counts()</span><br><span class="line"><span class="comment"># Out[64]: </span></span><br><span class="line"><span class="comment"># male      851</span></span><br><span class="line"><span class="comment"># female    462</span></span><br><span class="line"><span class="comment"># Name: Sex, dtype: int64</span></span><br></pre></td></tr></table></figure>

<p>unique和value_counts都可以用来处理和探索分类型数据的（categorical） 列。在数据整理阶段， 分类型数据的列中经常会有一些分类需要处理。例如， 在泰坦尼克号的数据集中， PClass这个列是用来表示乘客船票级别的。泰坦尼克号中有三种级别的船票， 而如果使用alue_counts， 我们就能看出数据中的一个问题：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Show counts</span></span><br><span class="line">dataframe[<span class="string">&#x27;PClass&#x27;</span>].value_counts()</span><br><span class="line"><span class="comment"># Out[65]: </span></span><br><span class="line"><span class="comment"># 3rd    711</span></span><br><span class="line"><span class="comment"># 1st    322</span></span><br><span class="line"><span class="comment"># 2nd    279</span></span><br><span class="line"><span class="comment"># *        1</span></span><br><span class="line"><span class="comment"># Name: PClass, dtype: int64</span></span><br></pre></td></tr></table></figure>

<p>几乎所有乘客的船票都在这三种级别中， 但有一位乘客的船票级别是*。有很多种策略能处理这种类型的问题， 在后面会详细介绍。现在， 我们只需要认识到“异常”类型的数据在分类型数据中很常见， 不应该忽视它们。如果你只是想统计有多少个唯一值， 则可以使用nunique：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Show number of unique values</span></span><br><span class="line">dataframe[<span class="string">&#x27;PClass&#x27;</span>].nunique()</span><br><span class="line"><span class="comment"># Out[66]: 4</span></span><br></pre></td></tr></table></figure>

<h2 id="处理缺失值"><a href="#处理缺失值" class="headerlink" title="处理缺失值"></a><strong>处理缺失值</strong></h2><p>isnull和notnull都能返回布尔型的值来表示一个值是否缺失：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 加载数据</span></span><br><span class="line">dataframe = pd.read_csv(url)</span><br><span class="line"><span class="comment">## 选择缺失值展示前两行</span></span><br><span class="line">dataframe[dataframe[<span class="string">&#x27;Age&#x27;</span>].isnull()].head(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># Out[68]: </span></span><br><span class="line"><span class="comment">#                             Name PClass  Age     Sex  Survived  SexCode</span></span><br><span class="line"><span class="comment"># 12  Aubert, Mrs Leontine Pauline    1st  NaN  female         1        1</span></span><br><span class="line"><span class="comment"># 13      Barkworth, Mr Algernon H    1st  NaN    male         1        0</span></span><br></pre></td></tr></table></figure>

<p>在数据整理中， 缺失值是很常见的问题， 很多人都低估了处理缺失值的难度。pandas使用NumPy的NaN（“Not A Number”， 意为“不是一个数字”） 来表示缺失值。但值得注意的是， pandas没有实现NaN。例如， 如果想要将所有包含male的字符串替换为缺失值的话， 就会得到一条错误消息：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 尝试使用NaN替换值</span></span><br><span class="line">dataframe[<span class="string">&#x27;Sex&#x27;</span>] = dataframe[<span class="string">&#x27;Sex&#x27;</span>].replace(<span class="string">&#x27;male&#x27;</span>, NaN)</span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#   File &quot;C:\Users\Aimin Jiang\AppData\Local\Temp\ipykernel_151784\15800115.py&quot;, line 1, in &lt;module&gt;</span></span><br><span class="line"><span class="comment">#     dataframe[&#x27;Sex&#x27;] = dataframe[&#x27;Sex&#x27;].replace(&#x27;male&#x27;, NaN)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># NameError: name &#x27;NaN&#x27; is not defined</span></span><br></pre></td></tr></table></figure>

<p>要想使用NaN就需要先导入NumPy库：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 加载库</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># 使用NaN替换值</span></span><br><span class="line">dataframe[<span class="string">&#x27;Sex&#x27;</span>] = dataframe[<span class="string">&#x27;Sex&#x27;</span>].replace(<span class="string">&#x27;male&#x27;</span>, np.nan)</span><br></pre></td></tr></table></figure>

<p>有时候一个数据集会使用特殊的值来表示缺失的观察值， 比如NONE、 -999或者． 。pandas的read_csv中有一个参数， 允许用户指定一个值来代表缺失值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 加载数据设置缺失值</span></span><br><span class="line">dataframe = pd.read_csv(url, na_values=[np.nan, <span class="string">&#x27;NONE&#x27;</span>, -<span class="number">999</span>])</span><br></pre></td></tr></table></figure>



<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/EKDJKJSia78RSJGOeib1BxdksxdREz8V8SvP0L1N5wJ2sy70dia1qmxEGgibYOsmsU9KRicMyeqIetVib41kFmcUnAKg/640?wx_fmt=gif&wxfrom=5&wx_lazy=1" alt="图片"></p>
<hr>
<p><strong>参考来源：</strong></p>
<p>Chris Albon，Machine Learning with Python Cookbook-Practical Solutions from Preprocessing to Deep Learning</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>请我一杯咖啡吧！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/zhifubao.jpg" alt="蒋不言 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>蒋不言
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://tdlpblog.cn/year/030346613.html" title="python与机器学习系列">https://tdlpblog.cn/year/030346613.html</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="followme">
  <span>欢迎关注我的其它发布渠道</span>

  <div class="social-list">

      <div class="social-item">
          <span class="social-link">
            <span class="icon">
              <i class="fab fa-weixin"></i>
            </span>

            <span class="label">WeChat</span>
          </span>

          <img class="social-item-img" src="/images/wechat_channel.jpg">
      </div>
  </div>
</div>

           <div class="post-tags">
              <a href="/tags/Python/" rel="tag"><i class="fa fa-tag"></i> Python</a>
              <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag"><i class="fa fa-tag"></i> 机器学习</a>
          </div>
          <script type="text/javascript">
            var tagsall=document.getElementsByClassName("post-tags")
            for (var i = tagsall.length - 1; i >= 0; i--){
                var tags=tagsall[i].getElementsByTagName("a");
                for (var j = tags.length - 1; j >= 0; j--) {
                    var golden_ratio = 0.618033988749895;
                    var s = 0.5;
                    var v = 0.999;
                    var h = golden_ratio + Math.random()*0.8 - 0.5;
                    var h_i = parseInt(h * 6);
                    var f = h * 6 - h_i;
                    var p = v * (1 - s);
                    var q = v * (1 - f * s);
                    var t = v * (1 - (1 - f) * s);
                    var r, g, b;
                    switch (h_i) {
                        case 0:
                            r = v;
                            g = t;
                            b = p;
                            break;
                        case 1:
                            r = q;
                            g = v;
                            b = p;
                            break;
                        case 2:
                            r = p;
                            g = v;
                            b = t;
                            break;
                        case 3 :
                            r = p;
                            g = q;
                            b = v;
                            break;
                        case 4:
                            r = t;
                            g = p;
                            b = v;
                            break;
                        case 5:
                            r = v;
                            g = p;
                            b = q;
                            break;
                        default:
                            r = 1;
                            g = 1;
                            b = 1;
                      }
                    tags[j].style.background = "rgba("+parseInt(r*255)+","+parseInt(g*255)+","+parseInt(b*255)+","+0.5+")";
                }
            }                        
            </script>

        
  <div class="social-like a2a_kit a2a_kit_size_32 a2a_default_style">
    <a class="a2a_dd" target="_blank" rel="noopener" href="https://www.addtoany.com/share"></a>
      <a class="a2a_button_wechat"></a>
      <a class="a2a_button_email"></a>
      <a class="a2a_button_qzone"></a>
      <a class="a2a_button_douban"></a>
      <a class="a2a_button_evernote"></a>
      <a class="a2a_button_facebook"></a>
      <a class="a2a_button_twitter"></a>
  </div>

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/year/022133039.html" rel="prev" title="临床预测模型|预测研究中的验证问题：应该废除队列拆分？">
                  <i class="fa fa-angle-left"></i> 临床预测模型|预测研究中的验证问题：应该废除队列拆分？
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>








    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">蒋不言</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">62k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">1:52</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

<!--
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>
-->

<!-- 网站运行时间的设置 -->
<span id="timeDate">载入天数...</span>
<span id="times">载入时分秒...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("02/16/2024 10:00:00"); 
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒.";
    }
setInterval("createtime()",250);
</script>
    </div>
  </footer>

  

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.33/fancybox/fancybox.umd.js" integrity="sha256-+2+qOqR8CKoHh/AsVR9k2qaDBKWjYNC2nozhYmv5j9k=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script class="next-config" data-name="wavedrom" type="application/json">{"enable":true,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/wavedrom/3.4.0/wavedrom.min.js","integrity":"sha256-psuqlelzklLSAoqBmPNNdyJw8msJdKgKpUFJZQlJJjo="}}</script>
  <script class="next-config" data-name="wavedrom_skin" type="application/json">{"enable":true,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/wavedrom/3.4.0/skins/default.js","integrity":"sha256-fduc/Zszk5ezWws2uInY/ALWVmIrmV6VTgXbsYSReFI="}}</script>
  <script src="/js/third-party/tags/wavedrom.js"></script>

  <script src="/js/third-party/fancybox.js"></script>


  <script src="/js/third-party/addtoany.js"></script>

  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"jiangaimin1995","repo":"jiangaimin1995.github.io","client_id":"85d80bc9b34cd4535610","client_secret":"2b6702e44da8ebcb3c0c7dcf7e59157e5784affe","admin_user":"jiangaimin1995","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"0dc1c8c566fd027c9cd9d34249ea392f"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body>
</html>

<!-- 页面点击小红心 --> 
<script type="text/javascript" src="/js/clicklove.js"></script>



  <script src="/js/wobblewindow.js"></script>
  <script>
    //只在桌面版网页启用特效
    if( window.innerWidth > 768  ){
      $(document).ready(function () {
        
          $('#header').wobbleWindow({
            radius: 65,
            movementTop: false,
            movementLeft: false,
            movementRight: false,
            debug: false,
          });
        

        

        
          $('#footer').wobbleWindow({
            radius: 65,
            movementBottom: false,
            movementLeft: false,
            movementRight: false,
            offsetX: ,
            position: 'absolute',
            debug: false,
          });
        
      });
    }
  </script>
